<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<title>Bindery Example</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>

	<section class="intro">
		<h2>Bindery.js</h2>
		<div id="makeBook" onclick="binder.makeBook();">Make Book</div>
	</section>

  <section class="content">
		<h3 bindery-break="before">
			Table of Contents
		</h3>
		<ul class="toc">
			<li>
				<a href="#section1">Section 1</a>
			</li>
			<li>
				<a href="#section2">Section 2</a>
			</li>
			<li>
				<a href="#section3">Section 3</a>
			</li>
			<li>
				<a href="#section4">Section 4</a>
			</li>
			<li>
				<a href="#section5">Section 5</a>
			</li>
		</ul>

    <h2 id="section1" bindery-break="before">
      Section 1 and maybe the ok <a href="#">something longer</a>
    </h2>

    <script>
			var blahs = function() {
				return (new Array(parseInt(Math.random()*50))).join(" Blah ");
			}
      for (var i = 0; i < 10; i++) {
        document.write(`<p>This is paragraph 1:${i}. ${blahs()} End.</p>`)
      }
    </script>

		<figure class="big-figure">
      <figcaption>This is the caption. Just imagine its a really great explanation of everything you'd want to know about this.</figcaption>
    </figure>

    <div class="aside" id="test" bindery-break="avoid">
      <script>
        for (var i = 0; i < 10; i++) {
          document.write(`<p>This is aside 1:${i}. ${blahs()} End.</p>`)
        }
      </script>
    </div>

    <h2 id="section2" bindery-break="before">Section 2</h2>

    <figure bindery-break="avoid">
      <figcaption>This is the caption. Just imagine its a really great explanation of everything you'd want to know about this.</figcaption>
    </figure>

    <script>
      for (var i = 0; i < 10; i++) {
        document.write(`<p>This is paragraph 2:${i}. ${blahs()} End.</p>`)
      }
    </script>

		<figure class="med-figure">
      <figcaption>This is the caption. Just imagine its a really great explanation of everything you'd want to know about this.</figcaption>
    </figure>

		<figure class="med-figure bleed">
      <figcaption>This is the caption. Just imagine its a really great explanation of everything you'd want to know about this.</figcaption>
    </figure>

		<script>
    for (var i = 0; i < 20; i++) {
      document.write(`<p>This is paragraph 2.1:${i}. ${blahs()} End.</p>`)
    }
    </script>
		<h2 id="section3" bindery-break="before">Section 3</h2>

		<script>
    for (var i = 0; i < 20; i++) {
      document.write(`<p>This is paragraph 3:${i}. ${blahs()} End.</p>`)
    }
    </script>
		<h2 id="section4" bindery-break="before">Section 4</h2>

		<script>
    for (var i = 0; i < 20; i++) {
      document.write(`<p>This is paragraph 4:${i}. ${blahs()} End.</p>`)
    }
    </script>
		<h2 id="section5" bindery-break="before">Section 5</h2>

		<script>
    for (var i = 0; i < 20; i++) {
      document.write(`<p>This is paragraph 5:${i}. ${blahs()} End.</p>`)
    }
    </script>
  </section>


	<script type="text/javascript" src="../build/bindery.js"></script>
	<script>
		let binder = new Bindery({
		  source: ".content",
		  rules: {
		    "h2": Bindery.BreakBefore,
		    "a": Bindery.Footnote((elmt) => `Link to <a href='#'>${elmt.href}</a>`),
		    "p": Bindery.Footnote((elmt) => elmt.textContent.substr(0,28)),
		    ".med-figure": Bindery.FullPage,
		    ".big-figure": Bindery.Spread,
		    ".content h2": Bindery.RunningHeader,
		    ".content": Bindery.PageNumber,
				".toc a": Bindery.PageReference,
		  },
		  pageSize: {
		    height: 500,
		    width: 350,
		  },
			margin: {
				inner: 30,
				outer: 50,
				bottom: 60,
				top: 40
			}
		});
	</script>
</body>
</html>
