<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>My Website - Book</title>
  <link rel="stylesheet" type="text/css" href="book.css" />
</head>

<body>

	<script type="text/javascript" src="../../build/bindery.js"></script>
	<script>

		fetch('content.html').then(function(response) {
			return response.text();
		}).then(function(fetchedContent) {

			var wrapper = document.createElement('div');
			wrapper.innerHTML = fetchedContent;
			let content = wrapper.querySelector(".content");

			let binder = new Bindery({
			  source: content,
			  rules: {
					"h2": Bindery.BreakBefore,
			    "p > a": Bindery.Footnote((elmt) => `Link to <a href='#'>${elmt.href}</a>`),
			    "p": Bindery.Footnote((elmt) => elmt.textContent.substr(0,28)),
			    ".med-figure": Bindery.FullPage,
			    ".big-figure": Bindery.Spread,
			    ".content h2": Bindery.RunningHeader,
			    ".content": Bindery.PageNumber,
					".toc a": Bindery.PageReference,
			  },
			  pageSize: {
			    height: 500,
			    width: 350,
			  },
				margin: {
					inner: 30,
					outer: 50,
					bottom: 60,
					top: 40
				},
				debugDelay: 0,
			});

			binder.makeBook();

		});

	</script>
</body>
</html>
