// [AIV]  Build version: 2.0.0-alpha.6 - Monday, August 28th, 2017, 2:00:48 PM  
 var Bindery=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return"📖-"+e},o=function(e){return"."+r(e)},i=function(e){return"."===e[0]?o(e.substr(1)):r(e)};t.default=i},function(e,t,n){function r(){function e(){function e(n){var u;if(null==n);else if("string"==typeof n)r?r.appendChild(u=d.createTextNode(n)):function(e){var t=s(e,/([\.#]?[^\s#.]+)/);/^\.|#/.test(t[1])&&(r=d.createElement("div")),i(t,function(e){var t=e.substring(1,e.length);e&&(r?"."===e[0]?l(r).add(t):"#"===e[0]&&r.setAttribute("id",t):r=d.createElement(e))})}(n);else if("number"==typeof n||"boolean"==typeof n||n instanceof Date||n instanceof RegExp)r.appendChild(u=d.createTextNode(n.toString()));else if(a(n))i(n,e);else if(o(n))r.appendChild(u=n);else if(n instanceof f)r.appendChild(u=n);else if("object"==typeof n)for(var c in n)if("function"==typeof n[c])/^on\w+/.test(c)?function(e,n){r.addEventListener?(r.addEventListener(e.substring(2),n[e],!1),t.push(function(){r.removeEventListener(e.substring(2),n[e],!1)})):(r.attachEvent(e,n[e]),t.push(function(){r.detachEvent(e,n[e])}))}(c,n):(r[c]=n[c](),t.push(n[c](function(e){r[c]=e})));else if("style"===c)if("string"==typeof n[c])r.style.cssText=n[c];else for(var p in n[c])!function(e,o){if("function"==typeof o)r.style.setProperty(e,o()),t.push(o(function(t){r.style.setProperty(e,t)}));else var i=n[c][e].match(/(.*)\W+!important\W*$/);i?r.style.setProperty(e,i[1],"important"):r.style.setProperty(e,n[c][e])}(p,n[c][p]);else if("attrs"===c)for(var h in n[c])r.setAttribute(h,n[c][h]);else"data-"===c.substr(0,5)?r.setAttribute(c,n[c]):r[c]=n[c];else if("function"==typeof n){var h=n();r.appendChild(u=o(h)?h:d.createTextNode(h)),t.push(n(function(e){o(e)&&u.parentElement?(u.parentElement.replaceChild(e,u),u=e):u.textContent=e}))}return u}for(var n=[].slice.call(arguments),r=null;n.length;)e(n.shift());return r}var t=[];return e.cleanup=function(){for(var e=0;e<t.length;e++)t[e]();t.length=0},e}function o(e){return e&&e.nodeName&&e.nodeType}function i(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}function a(e){return"[object Array]"==Object.prototype.toString.call(e)}var s=n(12),l=n(13),u="undefined"==typeof window?n(15):window,d=u.document,f=u.Text;(e.exports=r()).context=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={enum:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.includes(e)}},string:function(e){return"string"==typeof e},bool:function(e){return"boolean"==typeof e},func:function(e){return"function"==typeof e},validate:function(e,t){Object.keys(e).forEach(function(n){if(t[n]){var r=e[n];t[n](r)||console.error("Bindery: In Rule '"+e.name+"', '"+r+"' is not a valid value for '"+n+"'")}else console.error("Bindery: Rule '"+e.name+"' doesn't have an option '"+n+"'")})}};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){var n=this;r(this,e),this.name=t.name?t.name:"Unnamed Bindery Rule",this.selector="",Object.keys(t).forEach(function(e){n[e]=t[e]})};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),l=n(0),u=r(l),d=function(){function e(){o(this,e),this.flowContent=(0,s.default)((0,u.default)(".content")),this.flowBox=(0,s.default)((0,u.default)(".flowbox"),this.flowContent),this.footer=(0,s.default)((0,u.default)(".footer")),this.background=(0,s.default)((0,u.default)(".background")),this.element=(0,s.default)((0,u.default)(".page")+(0,u.default)(".page-size"),this.background,this.flowBox,this.footer)}return i(e,[{key:"overflowAmount",value:function(){var e=this.flowContent.offsetHeight,t=this.flowBox.offsetHeight;if(0===t)throw Error("Bindery: Trying to flow into a box of zero height.");return e-t}},{key:"hasOverflowed",value:function(){return this.overflowAmount()>-5}},{key:"setLeftRight",value:function(e){if("left"===e)this.side=e,this.element.classList.remove((0,u.default)("right")),this.element.classList.add((0,u.default)("left"));else{if("right"!==e)throw Error("Bindery: Setting page to invalid direction"+e);this.side=e,this.element.classList.remove((0,u.default)("left")),this.element.classList.add((0,u.default)("right"))}}},{key:"setPreference",value:function(e){"left"===e&&(this.alwaysLeft=!0),"right"===e&&(this.alwaysRight=!0)}},{key:"suppressErrors",get:function(){return this.suppress||!1},set:function(e){this.suppress=e,e?this.element.classList.add((0,u.default)("is-overflowing")):this.element.classList.remove((0,u.default)("is-overflowing"))}},{key:"isEmpty",get:function(){return!this.hasOutOfFlowContent&&""===this.flowContent.textContent.trim()&&this.flowContent.offsetHeight<1}},{key:"isLeft",get:function(){return"left"===this.side}},{key:"isRight",get:function(){return"right"===this.side}}],[{key:"isSizeValid",value:function(){document.body.classList.remove((0,u.default)("viewing"));var t=new e,n=document.querySelector((0,u.default)(".measure-area"));n||(n=document.body.appendChild((0,s.default)((0,u.default)(".measure-area")))),n.innerHTML="",n.appendChild(t.element);var r=t.flowBox.getBoundingClientRect();return n.parentNode.removeChild(n),r.height>100&&r.width>100}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={px:1,in:96,pt:4/3,pc:16,mm:25.4/96,cm:25.4/96*10},o=function(e,t){return e*r[t]},i=function(e,t){return e/r[t]},a=function(e,t,n){return i(o(e,t),n)},s=/^([+-]?[0-9]+(.?[0-9]+)?)(px|in|cm|mm|pt|pc)$/,l=function(e){return s.test(e)},u=function(e){Object.keys(e).forEach(function(t){if(!l(e[t]))throw"number"==typeof e[t]?Error("Size is missing units { "+t+": "+e[t]+" }"):Error("Invalid size { "+t+": "+e[t]+" }")})},d=function(e){var t=e.match(s);return{val:Number(t[1]),unit:t[3]}},f=function(e){var t=d(e);return o(t.val,t.unit)},c=function(e,t){var n=d(e);return""+i(o(n.val,n.unit),t)+t};t.cssNumberPattern="^([+-]?[0-9]+(.?[0-9]+)?)(px|in|cm|mm|pt|pc)$",t.parseVal=d,t.isValidLength=l,t.isValidSize=u,t.convert=a,t.convertStrToStr=c,t.convertStrToPx=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Replace",n}return i(t,e),a(t,[{key:"afterAdd",value:function(e,t,n,r){var o=e.parentNode;if(!o)throw Error("Bindery: Rule assumes element has been added but it has no parent.",e);var i=e.cloneNode(!0),a=this.createReplacement(t,i);return o.replaceChild(a,e),t.currentPage.hasOverflowed()?(o.replaceChild(e,a),r(e)):a}},{key:"createReplacement",value:function(e,t){return this.replace(t)}},{key:"replace",value:function(e){return e.insertAdjacentHTML("beforeEnd",'<sup class="bindery-sup">Default Replacement</sup>'),e}}]),t}(l.default);t.default=u},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){var t=e.tagName.toLowerCase(),n=e.id?"#"+e.id:"",o="";e.classList.length>0&&(o="."+[].concat(r(e.classList)).join("."));var i="";return n.length<1&&o.length<2&&(i='("'+e.textContent.substr(0,30).replace(/\s+/g," ")+'...")'),t+n+o+i};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeRanges=t.last=t.arraysEqual=void 0;var o=n(17),i=r(o),a=n(18),s=r(a),l=n(19),u=r(l);t.arraysEqual=i.default,t.last=s.default,t.makeRanges=u.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),d=n(3),f=r(d),c=n(0),p=r(c),h=n(7),g=r(h),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Out of Flow",n}return a(t,e),s(t,[{key:"beforeAdd",value:function(e,t,n,r){var o=(0,u.default)((0,p.default)(".out-of-flow"));return o.setAttribute("data-bindery",""+(0,g.default)(e)),this.addElementOutOfFlow(e,t,r),("same"!==this.continue||t.currentPage.hasOutOfFlowContent)&&(n(),"left"!==this.continue&&"right"!==this.continue||t.currentPage.setPreference(this.continue)),o}}]),t}(f.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),u=n(25),d=r(u),f=n(26),c=r(f),p=n(0),h=r(p),g=n(37),b=r(g);n(45);var m="12pt",v={width:"288pt",height:"432pt"},y={inner:"24pt",outer:"32pt",bottom:"54pt",top:"48pt"},w=function(){function e(t){if(o(this,e),console.log("Bindery 2.0.0-alpha.6"),this.autorun=t.autorun||!0,this.autoupdate=t.autoupdate||!1,this.debug=t.debug||!1,this.styler=new d.default,this.styler.setSize(t.pageSize||v),this.styler.setMargin(t.pageMargin||y),this.styler.setBleed(t.bleed||m),this.viewer=new c.default({bindery:this}),this.controls=this.viewer.controls,t.startingView&&this.viewer.setMode(t.startingView),this.rules=[],t.rules&&this.addRules(t.rules),t.source)if("string"==typeof t.source){if(this.source=document.querySelector(t.source),!(this.source instanceof HTMLElement))return this.viewer.displayError("Source not specified",'Could not find element that matches selector "'+t.source+'"'),void console.error('Bindery: Could not find element that matches selector "'+t.source+'"');this.autorun&&this.makeBook()}else if("object"===i(t.source)&&t.source.url){var n=t.source.url,r=t.source.selector;this.fetchSource(n,r)}else t.source instanceof HTMLElement?(this.source=t.source,this.autorun&&this.makeBook()):console.error("Bindery: Source must be an element or selector");else this.viewer.displayError("Source not specified","You must include a source element, selector, or url"),console.error("Bindery: You must include a source element or selector")}return a(e,[{key:"fetchSource",value:function(e,t){var n=this;fetch(e).then(function(t){if(404===t.status)n.viewer.displayError("404",'Could not find file at "'+e+'"');else if(200===t.status)return t.text();return""}).then(function(e){var r=document.createElement("div");if(r.innerHTML=e,n.source=r.querySelector(t),!(n.source instanceof HTMLElement))return n.viewer.displayError("Source not specified",'Could not find element that matches selector "'+t+'"'),void console.error('Bindery: Could not find element that matches selector "'+t+'"');n.autorun&&n.makeBook()}).catch(function(t){console.error(t),"file"===window.location.href.split("://")[0]&&n.viewer.displayError("Can't fetch content from \""+e+'"',"Web pages can't fetch content unless they are on a server.")})}},{key:"cancel",value:function(){this.viewer.cancel(),document.body.classList.remove((0,h.default)("viewing")),this.source.style.display=""}},{key:"addRules",value:function(e){var t=this;e.forEach(function(e){if(!(e instanceof b.default.Rule))throw Error("Bindery: The following is not an instance of Bindery.Rule and will be ignored: "+e);t.rules.push(e)})}},{key:"makeBook",value:function(e){var t=this;if(!this.source)return void document.body.classList.add((0,h.default)("viewing"));if(!this.styler.isSizeValid())return this.viewer.displayError("Page is too small","Size: "+JSON.stringify(this.pageSize)+" \n Margin: "+JSON.stringify(this.pageMargin)+" \n Try adjusting the sizes or units."),void console.error("Bindery: Cancelled pagination. Page is too small.");this.source.style.display="";var n=this.source.cloneNode(!0);this.source.style.display="none",this.viewer.clear(),document.body.classList.add((0,h.default)("viewing")),this.viewer.element.classList.add((0,h.default)("in-progress")),this.debug&&document.body.classList.add((0,h.default)("debug")),this.styler.updateStylesheet(),this.controls.setInProgress(),(0,l.default)({content:n,rules:this.rules,success:function(n){t.viewer.book=n,t.viewer.render(),t.controls.setDone(),e&&e(),t.viewer.element.classList.remove((0,h.default)("in-progress")),document.body.classList.remove((0,h.default)("debug"))},progress:function(e){t.viewer.book=e,t.controls.updateProgress(e.pages.length),t.viewer.renderProgress()},error:function(e){t.viewer.element.classList.remove((0,h.default)("in-progress")),t.viewer.displayError("Layout couldn't complete",e)},isDebugging:this.debug})}}],[{key:"makeBook",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.autorun=!t.autorun||t.autorun,new e(t)}}]),e}();Object.keys(b.default).forEach(function(e){w[e]=b.default[e]}),e.exports=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(7),l=r(s),u=n(0),d=r(u),f=(n(16),n(8)),c=n(20),p=r(c),h=n(4),g=r(h),b=n(21),m=r(b),v=n(22),y=r(v),w=n(23),x=r(w),k=n(24),C=r(k),_=function(e){var t=e.content,n=e.rules,r=e.success,i=e.progress,s=e.error,u=e.isDebugging,c=window.performance.now(),h={breadcrumb:[],pages:[],book:new p.default},b=new m.default(u),v=document.body.appendChild((0,a.default)((0,d.default)(".measure-area"))),w=(0,C.default)(n),k=function(e){n.forEach(function(t){t.afterPageCreated&&t.afterPageCreated(e,h)})},_=function(){var e=new g.default;return v.appendChild(e.element),k(e),e},O=function(){if(h.currentPage&&h.currentPage.hasOverflowed()&&(console.warn("Bindery: Page overflowing",h.currentPage.element),!h.currentPage.suppressErrors))throw Error("Bindery: Moved to new page when last one is still overflowing");if(500===h.pages.length)console.warn("Bindery: More than 500 pages, performance may be slow.");else if(1e3===h.pages.length)console.warn("Bindery: More than 1000 pages, performance may be slow.");else if(h.pages.length>9999)throw s("Maximum page count exceeded"),Error("Bindery: Maximum page count exceeded. Suspected runaway layout.");h.breadcrumb=w(h.breadcrumb);var e=_();if(h.pages.push(e),h.currentPage=e,h.breadcrumb[0]&&e.flowContent.appendChild(h.breadcrumb[0]),e.hasOverflowed()){var t=(0,f.last)(h.breadcrumb);t?(console.error("Bindery: NextPage already overflowing, probably due to a style set on "+(0,l.default)(t)+". It may not fit on the page."),t.parentNode.removeChild(t)):console.error("Bindery: NextPage already overflowing.")}return N(),e},P=n.filter(function(e){return e.selector&&e.beforeAdd}),E=function(e){var t=e;return P.forEach(function(e){t.matches(e.selector)&&(t=e.beforeAdd(t,h,O,_))}),t},M=n.filter(function(e){return e.selector&&e.afterAdd}),L=function(e){var t=e;return M.forEach(function(e){t.matches(e.selector)&&(t=e.afterAdd(t,h,O,function(t){return t.parentNode.removeChild(t),O(),(0,f.last)(h.breadcrumb).appendChild(t),e.afterAdd(t,h,O,function(){console.log("Couldn't apply "+e.name+" to "+(0,l.default)(t)+". Caused overflows twice.")})}))}),t},j=function(e){n.forEach(function(t){t.afterBind&&e.pages.forEach(function(n){t.afterBind(n,e)})})},z=n.filter(function(e){return e.avoidSplit}).map(function(e){return e.selector}),S=function e(t){return z.some(function(e){return t.matches(e)})?!!t.hasAttribute("data-bindery-did-move")||!!t.classList.contains((0,d.default)("continuation")):!t.parentElement||e(t.parentElement)},B=function(e){if(h.breadcrumb.pop(),h.breadcrumb.length<1)throw Error("Bindery: Attempting to move the top-level element is not allowed");for(var t=e,n=[];h.breadcrumb.length>1&&!S((0,f.last)(h.breadcrumb));)t=h.breadcrumb.pop(),n.unshift(t);t.setAttribute("data-bindery-did-move",!0);var r=t.parentNode;r.removeChild(t),h.breadcrumb.length>1&&""===(0,f.last)(h.breadcrumb).textContent.trim()&&(r.appendChild(t),t=h.breadcrumb.pop(),n.unshift(t),t.parentNode.removeChild(t)),h.currentPage.isEmpty?e.setAttribute("data-bindery-oversized",!0):(h.currentPage.hasOverflowed()&&(h.currentPage.suppressErrors=!0),O()),h.breadcrumb[0]?(0,f.last)(h.breadcrumb).appendChild(t):(console.log("new page has no breadcrumb, adding ",t),h.currentPage.flowContent.appendChild(t)),n.forEach(function(e){h.breadcrumb.push(e)}),h.breadcrumb.push(e)},A=function(e,t,n){(0,f.last)(h.breadcrumb).appendChild(e),h.currentPage.hasOverflowed()?(e.parentNode.removeChild(e),n()):b.throttle(t)},T=function(e,t,n){var r=e.nodeValue,o=e;if((0,f.last)(h.breadcrumb).appendChild(o),!h.currentPage.hasOverflowed())return void b.throttle(t);if((0,f.last)(h.breadcrumb).hasAttribute("data-bindery-oversized"))return void b.throttle(t);var i=0;!function e(){if(o.nodeValue=r.substr(0,i),h.currentPage.hasOverflowed()){for(" "===r.charAt(i)&&(i-=1);" "!==r.charAt(i)&&i>0;)i-=1;if(i<1)return o.nodeValue=r,o.parentNode.removeChild(o),void n();var a=r.substr(0,i),s=r.substr(i);return o.nodeValue=a,(r=s,i=0,O(),o=document.createTextNode(r),(0,f.last)(h.breadcrumb).appendChild(o),h.currentPage.hasOverflowed())?void b.throttle(e):void b.throttle(t)}if(i>r.length-1)return void b.throttle(t);for(i+=1;" "!==r.charAt(i)&&i<r.length;)i+=1;b.throttle(e)}()},R=function(e,t,n){var r=function(){(0,f.last)(h.breadcrumb).appendChild(t),h.currentPage.suppressErrors=!0,O(),b.throttle(n)};if(S(e)){T(t,n,function(){h.breadcrumb.length>1?(B(e),b.throttle(function(){return T(t,n,r)})):r()})}else{A(t,n,function(){B(e),b.throttle(function(){return A(t,n,r)})})}},F=function e(t,n,r){var o=n;if("SCRIPT"===o.tagName)return void r();if("IMG"===o.tagName&&!o.naturalWidth){console.log("Bindery: Waiting for image '"+o.src+"' size to load");var i=setInterval(function(){o.naturalWidth&&(clearInterval(i),console.log("Bindery: Image '"+o.src+"' size loaded."),e(t,o,r))},10);return o.addEventListener("error",function(){console.error("Bindery: Image '"+o.src+"' failed to load."),e(t,o,r)}),void(o.src=o.src)}o=E(o);var a=function(){var e=h.breadcrumb.pop();L(e),h.currentPage.hasOverflowed(),r()};b.throttle(function(){H(o,a)})},H=function(e,t){h.currentPage.hasOverflowed()&&((0,f.last)(h.breadcrumb).hasAttribute("data-bindery-oversized")||(h.currentPage.suppressErrors=!0,O())),h.breadcrumb[0]?(0,f.last)(h.breadcrumb).appendChild(e):h.currentPage.flowContent.appendChild(e),h.breadcrumb.push(e);var n=[].concat(o(e.childNodes));e.innerHTML="",h.currentPage.hasOverflowed()&&B(e);var r=0;!function o(){if(!(r<n.length))return void t();var i=n[r];r+=1,i.nodeType===Node.TEXT_NODE?R(e,i,o):i.nodeType===Node.ELEMENT_NODE?F(e,i,o):o()}()},N=function(){(0,x.default)(h.pages),h.book.pages=h.pages,j(h.book),i(h.book)},D=function(){document.body.removeChild(v);var e=(0,y.default)(h.pages,_);(0,x.default)(e),h.book.pages=e,h.book.setCompleted(),j(h.book);var t=window.performance.now();u||console.log("Bindery: Pages created in "+(t-c)/1e3+"s"),r(h.book)};t.style.margin=0,t.style.padding=0,O(),H(t,D)};t.default=_},function(e,t){/*!
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 * ECMAScript compliant, uniform cross-browser split method
 */
e.exports=function(e){var t=String.prototype.split,n=/()??/.exec("")[1]===e;return function(r,o,i){if("[object RegExp]"!==Object.prototype.toString.call(o))return t.call(r,o,i);var a,s,l,u,d=[],f=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.extended?"x":"")+(o.sticky?"y":""),c=0,o=new RegExp(o.source,f+"g");for(r+="",n||(a=new RegExp("^"+o.source+"$(?!\\s)",f)),i=i===e?-1>>>0:i>>>0;(s=o.exec(r))&&!((l=s.index+s[0].length)>c&&(d.push(r.slice(c,s.index)),!n&&s.length>1&&s[0].replace(a,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(s[t]=e)}),s.length>1&&s.index<r.length&&Array.prototype.push.apply(d,s.slice(1)),u=s[0].length,c=l,d.length>=i));)o.lastIndex===s.index&&o.lastIndex++;return c===r.length?!u&&o.test("")||d.push(""):d.push(r.slice(c)),d.length>i?d.slice(0,i):d}}()},function(e,t,n){function r(e){function t(e){var t=d();a(t,e)>-1||(t.push(e),f(t))}function n(e){var t=d(),n=a(t,e);-1!==n&&(t.splice(n,1),f(t))}function r(e){return a(d(),e)>-1}function s(e){return r(e)?(n(e),!1):(t(e),!0)}function l(){return e.className}function u(e){return d()[e]||null}function d(){return o(e.className.split(" "),i)}function f(t){var n=t.length;e.className=t.join(" "),p.length=n;for(var r=0;r<t.length;r++)p[r]=t[r];delete t[n]}var c=e.classList;if(c)return c;var p={add:t,remove:n,contains:r,toggle:s,toString:l,length:0,item:u};return p}function o(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n}function i(e){return!!e}var a=n(14);e.exports=r},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e<.5?2*e*e:(4-2*e)*e-1},o=function(e){return(e.scrollTop+e.offsetHeight)/e.scrollHeight},i=function(e){var t=e.scrollTop,n=e.scrollHeight,o=n-t,i=0;!function n(){e.scrollTop=t+r(i)*o,(i+=.05)<1&&requestAnimationFrame(n)}()};t.scrollToBottom=i,t.scrollPct=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e[e.length-1]};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t="",n=e[0],r=!1;return e.forEach(function(o,i){var a=i===e.length-1,s=o===n+1;0===i?t+=""+o:a?t+=s?"–"+o:r?"–"+n+", "+o:", "+o:s?r=!0:r&&!s?(r=!1,t+="–"+n+", "+o):t+=", "+o,n=o}),t};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.pages=[],this.queued=[],this.isComplete=!1}return o(e,[{key:"pagesForSelector",value:function(e){return this.pagesForTest(function(t){return t.element.querySelector(e)})}},{key:"pagesForTest",value:function(e){return this.pages.filter(function(t){return e(t.element)}).map(function(e){return e.number})}},{key:"onComplete",value:function(e){this.isComplete?e():this.queued.push(e)}},{key:"setCompleted",value:function(){this.isComplete=!0,this.queued.forEach(function(e){e()})}},{key:"pageCount",get:function(){return this.pages.length}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.numberOfCalls=0,this.resumeLimit=1/0,this.callsSinceResume=0,this.queuedFunc=null,this.isPaused=!1,this.useDelay=t,this.delayTime=100,t&&(window.binderyDebug={pause:this.pause.bind(this),resume:this.resume.bind(this),resumeFor:this.resumeFor.bind(this),step:this.step.bind(this),finish:this.finish.bind(this)},console.log("Bindery: Debug layout with the following: \nbinderyDebug.pause() \nbinderyDebug.resume()\n binderyDebug.resumeFor(n) // pauses after n steps, \nbinderyDebug.step()"))}return o(e,[{key:"throttle",value:function(e){this.callsSinceResume+=1,this.callsSinceResume>this.resumeLimit&&this.endResume(),this.isPaused?this.queuedFunc=e:this.useDelay?setTimeout(e,this.delayTime):this.numberOfCalls<1e3?(this.numberOfCalls+=1,e()):(this.numberOfCalls=0,requestAnimationFrame(e))}},{key:"pause",value:function(){return this.isPaused?"Already paused":(this.isPaused=!0,"Paused")}},{key:"resumeDelay",value:function(){this.useDelay=!0,this.resume()}},{key:"finish",value:function(){this.useDelay=!1,this.resume()}},{key:"resume",value:function(){return this.isPaused?(this.isPaused=!1,this.queuedFunc?(this.queuedFunc(),this.queuedFunc=null,"Resuming"):"Layout complete"):"Already running"}},{key:"step",value:function(){if(!this.isPaused)return this.pause();if(this.queuedFunc){var e=this.queuedFunc,t=e.name;return this.queuedFunc=null,e(),t}return"Layout complete"}},{key:"resumeFor",value:function(e){return this.callsSinceResume=0,this.resumeLimit=e,this.resume()}},{key:"endResume",value:function(){console.log("Paused after "+this.resumeLimit),this.resumeLimit=1/0,this.callsSinceResume=0,this.pause()}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){for(var n=t;n<e.length;n+=1)if(!e[n].isOutOfFlow)return n;return t},o=function(e,t){for(var n=e.slice(),o=0;o<n.length;o+=1){var i=n[o],a=o%2!=0;if(a&&i.alwaysRight)if(i.isOutOfFlow){var s=r(n,o+1),l=n[s];n.splice(s,1),n.splice(o,0,l)}else n.splice(o,0,t());else if(!a&&i.alwaysLeft)if(i.isOutOfFlow){var u=r(n,o+1),d=n[u];n.splice(u,1),n.splice(o,0,d)}else n.splice(o,0,t())}return n};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){e.forEach(function(e,t){e.number=t+1,e.setLeftRight(t%2==0?"right":"left")});var t={h1:"",h2:"",h3:"",h4:"",h5:"",h6:""};e.forEach(function(e){e.heading={},Object.keys(t).forEach(function(n,r){var o=e.element.querySelector(n);o&&(t[n]=o.textContent,Object.keys(t).forEach(function(e,n){n>r&&(t[e]="")})),""!==t[n]&&(e.heading[n]=t[n])})})};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e){var t=function(t){t.classList.add((0,o.default)("continues")),e.filter(function(e){return e.customContinuesClass}).forEach(function(e){return t.classList.add(e.customContinuesClass)})},n=function(t){t.classList.add((0,o.default)("continuation")),e.filter(function(e){return e.customContinuationClass}).forEach(function(e){return t.classList.add(e.customContinuationClass)})};return function(e){for(var r=[],o=e.length-1;o>=0;o-=1){var i=e[o],a=i.cloneNode(!1);if(a.innerHTML="",t(i),n(a),a.id,"OL"===a.tagName){var s=1;i.hasAttribute("start")&&(s=parseInt(i.getAttribute("start"),10)),o<e.length-1&&"LI"===e[o+1].tagName&&(s-=1);var l=i.children.length,u=s+l;a.setAttribute("start",u)}o<e.length-1&&a.appendChild(r[o+1]),r[o]=a}return r}};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=r(a),l=n(5),u=n(0),d=r(u),f=function(){function e(){o(this,e)}return i(e,[{key:"setSize",value:function(e){(0,l.isValidSize)(e),this.size=e}},{key:"setMargin",value:function(e){(0,l.isValidSize)(e),this.margin=e}},{key:"setBleed",value:function(e){this.bleed=e}},{key:"isSizeValid",value:function(){return this.updateStylesheet(),s.default.isSizeValid()}},{key:"spreadSizeStyle",value:function(){var e=(0,l.parseVal)(this.size.width);return{height:this.size.height,width:""+2*e.val+e.unit}}},{key:"updateStylesheet",value:function(){var e=void 0,t=document.querySelector("#binderyPageSetup");t?e=t:(e=document.createElement("style"),e.id="binderyPageSetup");var n=(0,l.parseVal)(this.size.width);e.innerHTML="\n"+(0,d.default)(".show-crop")+" "+(0,d.default)(".spread-wrapper")+",\n"+(0,d.default)(".show-bleed-marks")+" "+(0,d.default)(".spread-wrapper")+" {\n  margin: calc("+this.bleed+" + 12pt) auto;\n}\n"+(0,d.default)(".page-size")+" {\n  height: "+this.size.height+";\n  width: "+this.size.width+";\n}\n"+(0,d.default)(".page-size-rotated")+" {\n  height: "+this.size.width+";\n  width: "+this.size.height+";\n}\n"+(0,d.default)(".spread-size")+" {\n  height: "+this.size.height+";\n  width: "+2*n.val+n.unit+";\n}\n"+(0,d.default)(".spread-size-rotated")+" {\n  height: "+2*n.val+n.unit+";\n  width: "+this.size.height+";\n}\n"+(0,d.default)(".flowbox")+",\n"+(0,d.default)(".footer")+" {\n  margin-left: "+this.margin.inner+";\n  margin-right: "+this.margin.outer+";\n}\n"+(0,d.default)(".left")+" "+(0,d.default)(".flowbox")+",\n"+(0,d.default)(".left")+" "+(0,d.default)(".footer")+" {\n  margin-left: "+this.margin.outer+";\n  margin-right: "+this.margin.inner+";\n}\n\n"+(0,d.default)(".left")+" "+(0,d.default)(".running-header")+" {\n  left: "+this.margin.outer+";\n}\n"+(0,d.default)(".right")+" "+(0,d.default)(".running-header")+" {\n  right: "+this.margin.outer+";\n}\n\n"+(0,d.default)(".flowbox")+" { margin-top: "+this.margin.top+"; }\n"+(0,d.default)(".footer")+"{ margin-bottom: "+this.margin.bottom+"; }\n\n"+(0,d.default)(".bleed-left")+",\n"+(0,d.default)(".bleed-right")+",\n"+(0,d.default)(".crop-left")+",\n"+(0,d.default)(".crop-right")+",\n"+(0,d.default)(".crop-fold")+" {\n  top: calc( -12pt - "+this.bleed+" );\n  bottom: calc( -12pt - "+this.bleed+" );\n}\n\n"+(0,d.default)(".bleed-top")+",\n"+(0,d.default)(".bleed-bottom")+",\n"+(0,d.default)(".crop-top")+",\n"+(0,d.default)(".crop-bottom")+" {\n  left: calc( -12pt - "+this.bleed+" );\n  right: calc( -12pt - "+this.bleed+" );\n}\n"+(0,d.default)(".bleed-left")+"   { left: -"+this.bleed+"; }\n"+(0,d.default)(".bleed-right")+"  { right: -"+this.bleed+"; }\n"+(0,d.default)(".bleed-top")+"    { top: -"+this.bleed+"; }\n"+(0,d.default)(".bleed-bottom")+" { bottom: -"+this.bleed+"; }\n\n"+(0,d.default)(".background")+" {\n  top: -"+this.bleed+";\n  bottom: -"+this.bleed+";\n  left: -"+this.bleed+";\n  right: -"+this.bleed+";\n}\n\n"+(0,d.default)(".spread")+(0,d.default)(".right")+" > "+(0,d.default)(".background")+" {\n  left: calc(-100% - "+this.bleed+");\n}\n"+(0,d.default)(".spread")+(0,d.default)(".left")+" > "+(0,d.default)(".background")+" {\n  right: calc(-100% - "+this.bleed+");\n}\n    ",document.head.appendChild(e)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),l=n(0),u=r(l),d=n(27),f=r(d),c=n(4),p=r(c),h=n(29),g=r(h),b=n(30),m=r(b),v=n(31),y=r(v),w=n(32),x="grid",k="arrange_two",C=function(e){var t=void 0,n=document.querySelector("#binderyPrintSetup");n?t=n:(t=document.createElement("style"),t.id="binderyPrintSetup"),t.innerHTML="@page { size: "+e+"; }",document.head.appendChild(t)},_=function(){function e(t){var n=t.bindery;o(this,e),this.book=null,this.zoomBox=(0,s.default)((0,u.default)(".zoom-wrap")),this.element=(0,s.default)((0,u.default)(".root"),this.zoomBox),this.doubleSided=!0,this.printArrange=k,this.isShowingCropMarks=!0,this.isShowingBleedMarks=!1,this.setOrientation("landscape"),this.mode=x,this.currentLeaf=0,this.listenForPrint(),this.listenForResize(),this.setGrid=this.setGrid.bind(this),this.setOutline=this.setOutline.bind(this),this.setPrint=this.setPrint.bind(this),this.setFlip=this.setFlip.bind(this),this.controls=new f.default({binder:n,viewer:this}),this.element.classList.add((0,u.default)("in-progress")),this.element.appendChild(this.controls.element),document.body.appendChild(this.element)}return i(e,[{key:"listenForPrint",value:function(){var e=this;if(window.matchMedia){window.matchMedia("print").addListener(function(t){t.matches&&e.setPrint()})}}},{key:"listenForResize",value:function(){var e=this;window.addEventListener("resize",function(){e.throttleResize||(e.updateZoom(),e.throttleResize=setTimeout(function(){e.throttleResize=null},20))})}},{key:"setOrientation",value:function(e){e!==this.orientation&&(this.orientation=e,C(e),"print"===this.mode?this.render():this.setPrint())}},{key:"setPrintArrange",value:function(e){e!==this.printArrange&&(this.printArrange=e,"print"===this.mode?this.render():this.setPrint())}},{key:"displayError",value:function(e,t){this.element.parentNode||document.body.appendChild(this.element),this.error||(this.zoomBox.innerHTML="",this.error=(0,g.default)(e,t),this.zoomBox.appendChild(this.error))}},{key:"clear",value:function(){this.book=null,this.lastSpreadInProgress=null,this.zoomBox.innerHTML=""}},{key:"cancel",value:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)}},{key:"toggleGuides",value:function(){this.element.classList.toggle((0,u.default)("show-guides"))}},{key:"toggleBleed",value:function(){this.element.classList.add((0,u.default)("show-bleed"))}},{key:"toggleDouble",value:function(){this.doubleSided=!this.doubleSided,this.render()}},{key:"setMode",value:function(e){switch(e){case"grid":case"default":this.mode=x;break;case"interactive":case"flip":this.mode="interactive";break;case"print":case"sheet":this.mode="print";break;case"outline":case"outlines":this.mode="outline";break;default:console.error('Bindery: Unknown view mode "'+e+'"')}}},{key:"setGrid",value:function(){this.mode!==x&&("outline"===this.mode?(this.mode=x,this.updateGuides()):(this.mode=x,this.render()))}},{key:"setOutline",value:function(){"outline"!==this.mode&&(this.mode===x?(this.mode="outline",this.updateGuides()):(this.mode="outline",this.render()))}},{key:"setPrint",value:function(){"print"!==this.mode&&(this.mode="print",this.render())}},{key:"setFlip",value:function(){this.mode="interactive",this.render()}},{key:"render",value:function(){if(this.book){var e=document,t=e.body;this.element.parentNode||t.appendChild(this.element),this.flaps=[],t.classList.add((0,u.default)("viewing")),this.element.setAttribute("bindery-view-mode",this.mode);var n=t.scrollHeight-t.offsetHeight,r=t.scrollTop/n;this.mode===x?this.renderGrid():"outline"===this.mode?this.renderGrid():"interactive"===this.mode?this.renderInteractive():"print"===this.mode?this.renderPrint():this.renderGrid(),t.scrollTop=n*r,this.updateZoom()}}},{key:"renderProgress",value:function(){var e=this,t=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.default.apply(void 0,[(0,u.default)(".spread-wrapper")+(0,u.default)(".spread-size")].concat(t))};this.book.pages.forEach(function(n,r){if(!e.zoomBox.contains(n.element))if(e.lastSpreadInProgress&&e.lastSpreadInProgress.children.length<2)e.lastSpreadInProgress.appendChild(n.element);else{if(0===r){var o=new p.default;o.element.style.visibility="hidden",e.lastSpreadInProgress=t(o.element,n.element)}else e.lastSpreadInProgress=t(n.element);e.zoomBox.appendChild(e.lastSpreadInProgress)}})}},{key:"updateZoom",value:function(){if(this.zoomBox.firstElementChild){var e=document.body.scrollTop/document.body.scrollHeight,t=this.zoomBox.getBoundingClientRect().width,n=this.zoomBox.firstElementChild.getBoundingClientRect().width,r=Math.min(1,t/(n+20));this.zoomBox.style.transform="scale("+r+")",document.body.scrollTop=document.body.scrollHeight*e}}},{key:"updateGuides",value:function(){this.element.setAttribute("bindery-view-mode",this.mode),"outline"===this.mode?(this.element.classList.add((0,u.default)("show-bleed")),this.element.classList.add((0,u.default)("show-guides"))):(this.element.classList.remove((0,u.default)("show-bleed")),this.element.classList.remove((0,u.default)("show-guides")))}},{key:"renderPrint",value:function(){this.element.classList.add((0,u.default)("show-bleed")),this.element.classList.remove((0,u.default)("show-guides")),this.zoomBox.innerHTML="";var e="arrange_one"!==this.printArrange,t="arrange_booklet"===this.printArrange,n=this.orientation,r=this.book.pages.slice();this.printArrange===k?r=(0,y.default)(r):"arrange_booklet"===this.printArrange&&(r=(0,m.default)(r));var o=(0,w.printLayout)(r,e,n,t);this.zoomBox.appendChild(o)}},{key:"renderGrid",value:function(){this.updateGuides(),this.zoomBox.innerHTML="";var e=this.book.pages.slice();this.doubleSided&&(e=(0,y.default)(e));var t=(0,w.gridLayout)(e,this.doubleSided);this.zoomBox.appendChild(t)}},{key:"renderInteractive",value:function(){this.zoomBox.innerHTML="",this.flaps=[],this.element.classList.remove((0,u.default)("show-bleed")),this.element.classList.remove((0,u.default)("show-guides")),this.zoomBox.classList.add((0,u.default)("stage3d"));var e=(0,y.default)(this.book.pages.slice()),t=(0,w.flipLayout)(e,this.doubleSided);this.zoomBox.appendChild(t)}},{key:"isShowingCropMarks",get:function(){return this.element.classList.contains((0,u.default)("show-crop"))},set:function(e){e?this.element.classList.add((0,u.default)("show-crop")):this.element.classList.remove((0,u.default)("show-crop"))}},{key:"isShowingBleedMarks",get:function(){return this.element.classList.contains((0,u.default)("show-bleed-marks"))},set:function(e){e?this.element.classList.add((0,u.default)("show-bleed-marks")):this.element.classList.remove((0,u.default)("show-bleed-marks"))}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(5),l=n(0),u=r(l),d=n(28),f=function e(t){var n=this;o(this,e),this.binder=t.binder;var r=t.viewer,i=function(){n.binder.cancel()},l=function(){r.setPrint(),window.print()},f=(0,d.btnMain)({onclick:l},"Print"),c=void 0,p=void 0,h=void 0,g=void 0,b=function(){r.isShowingCropMarks=!r.isShowingCropMarks,p.classList.toggle("selected")},m=function(){r.isShowingBleedMarks=!r.isShowingBleedMarks,h.classList.toggle("selected")},v=function(){g.classList.toggle("selected"),c.classList.toggle("not-facing"),r.toggleDouble()};p=(0,d.switchRow)({onclick:b},"Crop Marks"),p.classList.add("selected"),h=(0,d.switchRow)({onclick:m},"Bleed Marks"),g=(0,d.switchRow)({onclick:v},"Facing Pages"),g.classList.add("selected");var y="";this.binder.autorun||(y=(0,d.btn)({onclick:i},"Done"));var w={top:(0,d.inputNumberUnits)(this.binder.styler.margin.top),inner:(0,d.inputNumberUnits)(this.binder.styler.margin.inner),outer:(0,d.inputNumberUnits)(this.binder.styler.margin.outer),bottom:(0,d.inputNumberUnits)(this.binder.styler.margin.bottom),width:(0,d.inputNumberUnits)(this.binder.styler.size.width),height:(0,d.inputNumberUnits)(this.binder.styler.size.height),bleed:(0,d.inputNumberUnits)(this.binder.styler.bleed)},x=(0,a.default)("."+(0,u.default)("row")+"."+(0,u.default)("size"),(0,a.default)("div","W",w.width),(0,a.default)("div","H",w.height)),k=(0,a.default)((0,u.default)(".preview")),C=(0,a.default)("."+(0,u.default)("row")+"."+(0,u.default)("margin"),(0,a.default)(".top",w.top),(0,a.default)(".inner",w.inner),(0,a.default)(".outer",w.outer),(0,a.default)(".bottom",w.bottom),k);c=(0,a.default)((0,u.default)(".layout-control"),x,C);var _=(0,d.row)("Bleed Amount",w.bleed),O=((0,d.row)("Paper Size",(0,d.select)((0,d.option)("Letter"),(0,d.option)({disabled:!0},"8.5 x 11"),(0,d.option)({disabled:!0},""),(0,d.option)({disabled:!0},"Legal"),(0,d.option)({disabled:!0},"8.5 x 14"),(0,d.option)({disabled:!0},""),(0,d.option)({disabled:!0},"Tabloid"),(0,d.option)({disabled:!0},"11 x 17"),(0,d.option)({disabled:!0},""),(0,d.option)({disabled:!0},"A4"),(0,d.option)({disabled:!0},"mm x mm"))),(0,d.select)((0,d.option)({value:"arrange_one"},"Pages"),(0,d.option)({value:"arrange_two",selected:!0},"Spreads"),(0,d.option)({value:"arrange_booklet"},"Booklet"),(0,d.option)({disabled:!0},"Grid"),(0,d.option)({disabled:!0},"Signatures")));O.addEventListener("change",function(){r.setPrintArrange(O.value)});var P=(0,d.row)("Print",O),E=(0,d.select)((0,d.option)({value:"landscape"},"Landscape"),(0,d.option)({value:"portrait"},"Portrait"));E.addEventListener("change",function(){r.setOrientation(E.value)});var M=(0,d.row)("Orientation",E),L=(0,a.default)("div",{style:{display:"none",color:"#e2b200"}},"Too Small"),j=(0,d.btnLight)({style:{display:"none","pointer-events":"none"}},"Updating..."),z=function(){j.style.display="",S.style.display="none",G.style.display="none",n.binder.makeBook(function(){j.style.display="none",S.style.display="",G.style.display=""})},S=(0,d.btn)({onclick:function(){n.binder.debug=!1,z()}},"Update"),B=[(0,d.viewMode)("grid",r.setGrid,"Preview"),(0,d.viewMode)("outline",r.setOutline,"Outline"),(0,d.viewMode)("flip",r.setFlip,"Flip"),(0,d.viewMode)("print",r.setPrint,"Sheet")],A=a.default.apply(void 0,[(0,u.default)(".viewswitcher")].concat(B)),T=(0,a.default)("span","Loading"),R=(0,d.title)((0,a.default)((0,u.default)(".spinner")),T),F=function(e,t){var n={top:(0,s.convertStrToPx)(t.top),inner:(0,s.convertStrToPx)(t.inner),outer:(0,s.convertStrToPx)(t.outer),bottom:(0,s.convertStrToPx)(t.bottom),width:(0,s.convertStrToPx)(e.width),height:(0,s.convertStrToPx)(e.height)},r=n.width/n.height;r=Math.max(r,.6),r=Math.min(r,1.8);var o=void 0,i=void 0;r>2?(o=90*r,i=90):(o=90,i=90/r);var a=n.top/n.height*i,l=n.bottom/n.height*i,u=n.outer/n.width*o,d=n.inner/n.width*o;x.style.width=o+"px",x.style.height=i+"px",C.style.width=o+"px",C.style.height=i+"px",k.style.top=a+"px",k.style.bottom=l+"px",k.style.left=d+"px",k.style.right=u+"px"};F(this.binder.styler.size,this.binder.styler.margin),this.setInProgress=function(){T.textContent="Paginating",L.style.display="none",j.style.display="",S.style.display="none"},this.updateProgress=function(e){T.textContent=e+" Pages"},this.setDone=function(){T.textContent=r.book.pages.length+" Pages",j.style.display="none",S.style.display="",L.style.display="none"},this.setInvalid=function(){L.style.display="",S.style.display="",j.style.display="none"};var H=function(){var e={top:w.top.value,inner:w.inner.value,outer:w.outer.value,bottom:w.bottom.value},t={height:w.height.value,width:w.width.value},r=w.bleed.value;(Object.keys(e).some(function(t){return n.binder.styler.margin[t]!==e[t]})||Object.keys(t).some(function(e){return n.binder.styler.size[e]!==t[e]})||n.binder.styler.bleed!==r)&&(F(t,e),n.binder.styler.setSize(t),n.binder.styler.setMargin(e),n.binder.styler.setBleed(r),n.binder.styler.updateStylesheet(),n.binder.autoupdate&&(n.binder.styler.isSizeValid()?n.binder.makeBook():n.setInvalid()))},N=void 0,D=function(){clearTimeout(N),N=setTimeout(H,200)};Object.keys(w).forEach(function(e){w[e].addEventListener("change",D),w[e].addEventListener("keyup",D)});var V=void 0,I=(0,d.btn)("→",{style:{display:"none"},onclick:function(){return window.binderyDebug.step()}}),U=(0,d.btn)("❙❙",{onclick:function(){window.binderyDebug.pause(),U.style.display="none",V.style.display="",I.style.display=""}});V=(0,d.btn)("▶️",{style:{display:"none"},onclick:function(){window.binderyDebug.resume(),V.style.display="none",U.style.display="",I.style.display="none"}});var q=(0,d.btn)("Done",{onclick:function(){window.binderyDebug.finish()}}),G=(0,d.btnLight)("Debug",{onclick:function(){V.style.display="none",I.style.display="none",U.style.display="",n.binder.debug=!0,z()}}),W=(0,d.row)(U,V,I,q);W.classList.add((0,u.default)("debug-controls")),f.classList.add((0,u.default)("btn-print"));var Y=(0,a.default)("div",S,G,L,j);this.element=(0,a.default)((0,u.default)(".controls"),R,P,M,(0,d.expandRow)("Marks and Bleed"),(0,d.expandArea)(p,h,_),(0,d.expandRow)("Pagination"),(0,d.expandArea)(c,(0,d.row)(Y)),W,(0,d.row)(y,f),A)};t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.viewMode=t.inputNumberUnits=t.switchRow=t.option=t.select=t.btnMain=t.btnLight=t.btn=t.heading=t.expandArea=t.expandRow=t.row=t.title=void 0;var o=n(1),i=r(o),a=n(0),s=r(a),l=n(5),u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".title")].concat(t))},d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".heading")].concat(t))},f=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".row")].concat(t))},c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,["."+(0,s.default)("row")+"."+(0,s.default)("expand-row"),{onclick:function(){this.classList.toggle("selected")}}].concat(t))},p=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".expand-area")].concat(t))},h=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,["button."+(0,s.default)("btn")].concat(t))},g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,["button."+(0,s.default)("btn")+"."+(0,s.default)("btn-light")].concat(t))},b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,["button."+(0,s.default)("btn")+"."+(0,s.default)("btn-main")].concat(t))},m=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,["select"].concat(t))},v=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,["option"].concat(t))},y=function(e){return(0,i.default)("input",{type:"text",value:e,pattern:l.cssNumberPattern})},w=function(){return(0,i.default)((0,s.default)(".switch"),(0,i.default)((0,s.default)(".switch-handle")))},x=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".row")].concat(t,[w]))},k=function(e,t,n){var r="."+(0,s.default)("viewmode")+"."+(0,s.default)(e);return(0,i.default)(r,{onclick:t},(0,i.default)((0,s.default)(".icon")),n)};t.title=u,t.row=f,t.expandRow=c,t.expandArea=p,t.heading=d,t.btn=h,t.btnLight=g,t.btnMain=b,t.select=m,t.option=v,t.switchRow=x,t.inputNumberUnits=y,t.viewMode=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)((0,s.default)(".error"),(0,i.default)((0,s.default)(".error-title"),e),(0,i.default)((0,s.default)(".error-text"),t),(0,i.default)((0,s.default)(".error-footer"),"Bindery 2.0.0-alpha.6"))};var o=n(1),i=r(o),a=n(0),s=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e){for(;e.length%4!=0;){var t=new o.default;t.element.style.visibility="hidden",e.push(t)}for(var n=[],r=e.length,i=0;i<r/2;i+=2)n.push(e[r-1-i]),n.push(e[i]),n.push(e[i+1]),n.push(e[r-2-i]);return n};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e){if(e.length%2!=0){var t=new o.default;e.push(t)}var n=new o.default,r=new o.default;return n.element.style.visibility="hidden",r.element.style.visibility="hidden",e.unshift(n),e.push(r),e};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.flipLayout=t.printLayout=t.gridLayout=void 0;var o=n(33),i=r(o),a=n(34),s=r(a),l=n(36),u=r(l);t.gridLayout=i.default,t.printLayout=s.default,t.flipLayout=u.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(0),s=r(a),l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".spread-wrapper")+(0,s.default)(".spread-size")].concat(t))},u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".spread-wrapper")+(0,s.default)(".page-size")].concat(t))},d=function(e,t){var n=document.createDocumentFragment();if(t)for(var r=0;r<e.length;r+=2){var o=l(e[r].element,e[r+1].element);n.appendChild(o)}else e.forEach(function(e){var t=u(e.element);n.appendChild(t)});return n};t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(0),s=r(a),l=n(35),u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".spread-wrapper")+(0,s.default)(".spread-size")].concat(t))},d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.apply(void 0,[(0,s.default)(".spread-wrapper")+(0,s.default)(".page-size")].concat(t))},f=function(e,t,n,r){var o=document.createDocumentFragment(),a=t?l.printMarksSpread:l.printMarksSingle,f=t?u:d,c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.default)((0,s.default)(".print-page")+(0,s.default)(".letter-"+n),f.apply(void 0,t.concat([a()])))};if(t)for(var p=0;p<e.length;p+=2){var h=c(e[p].element,e[p+1].element);if(o.appendChild(h),r){var g=(0,l.bookletMeta)(p,e.length);h.appendChild(g)}}else e.forEach(function(e){var t=c(e.element);o.appendChild(t)});return o};t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.bookletMeta=t.printMarksSpread=t.printMarksSingle=void 0;var i=n(1),a=r(i),s=n(0),l=r(s),u=function(){return[(0,a.default)((0,l.default)(".bleed-top")),(0,a.default)((0,l.default)(".bleed-bottom")),(0,a.default)((0,l.default)(".bleed-left")),(0,a.default)((0,l.default)(".bleed-right"))]},d=function(){return[(0,a.default)((0,l.default)(".crop-top")),(0,a.default)((0,l.default)(".crop-bottom")),(0,a.default)((0,l.default)(".crop-left")),(0,a.default)((0,l.default)(".crop-right"))]},f=function(){return a.default.apply(void 0,[(0,l.default)(".print-mark-wrap")].concat(o(d()),o(u())))},c=function(){return a.default.apply(void 0,[(0,l.default)(".print-mark-wrap"),(0,a.default)((0,l.default)(".crop-fold"))].concat(o(d()),o(u())))},p=function(e,t){var n=e%4==0,r=parseInt((e+1)/4,10)+1;return(0,a.default)((0,l.default)(".print-meta"),"Sheet "+r+" of "+t/4+": "+(n?"Outside":"Inside"))};t.printMarksSingle=f,t.printMarksSpread=c,t.bookletMeta=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(0),s=r(a),l=function(e,t){for(var n=document.createDocumentFragment(),r=[],o=-1,a=function(e){var t=e;t===o&&(t+=1),o=t;var n=4;r.length*n>200&&(n=200/r.length),r.forEach(function(e,r,o){var i=(o.length-Math.abs(r-t+.5))*n;e.style.transform="translate3d("+(r<t?4:0)+"px,0,"+i+"px) rotateY("+(r<t?-180:0)+"deg)"})},l=0,u=1;u<e.length-1;u+=t?2:1)!function(o){l+=1;var u=l,d=(0,i.default)((0,s.default)(".page3d")+(0,s.default)(".page-size"),{onclick:function(){a(u-1)}}),f=e[o].element,c=void 0;f.classList.add((0,s.default)("page3d-front")),d.appendChild(f),t?(d.classList.add((0,s.default)("doubleSided")),c=e[o+1].element,c.classList.add((0,s.default)("page3d-back")),d.appendChild(c)):(c=(0,i.default)((0,s.default)(".page")+(0,s.default)(".page3d-back")),d.appendChild(c));var p=4;e.length*p>300&&(p=300/e.length),d.style.left=o*p+"px",r.push(d),n.appendChild(d)}(u);return a(0),n};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(38),i=r(o),a=n(39),s=r(a),l=n(40),u=r(l),d=n(41),f=r(d),c=n(42),p=r(c),h=n(43),g=r(h),b=n(6),m=r(b),v=n(3),y=r(v),w=n(44),x=r(w);t.default={Rule:y.default,Continuation:function(e){return new i.default(e)},FullBleedPage:function(e){return new u.default(e)},Footnote:function(e){return new f.default(e)},RunningHeader:function(e){return new g.default(e)},Replace:function(e){return new m.default(e)},FullBleedSpread:function(e){return new s.default(e)},PageBreak:function(e){return new x.default(e)},PageReference:function(e){return new p.default(e)},createRule:function(e){return new y.default(e)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),d=n(2),f=r(d),c=function(e){function t(e){o(this,t),e.hasContinuationClass=e.hasContinuationClass||"my-continues",e.isContinuationClass=e.isContinuationClass||"my-continuation";var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Continuation",f.default.validate(e,{selector:f.default.string,hasContinuationClass:f.default.string,isContinuationClass:f.default.string}),n}return a(t,e),s(t,[{key:"customContinuesClass",get:function(){return this.hasContinuationClass}},{key:"customContinuationClass",get:function(){return this.isContinuationClass}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),d=n(9),f=r(d),c=n(2),p=r(c),h=n(0),g=r(h),b=function(e){function t(e){o(this,t),e.continue=e.continue||"same",e.rotate=e.rotate||"none";var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Full Bleed Spread",p.default.validate(e,{selector:p.default.string,continue:p.default.enum("next","same","left","right"),rotate:p.default.enum("none","clockwise","counterclockwise")}),n}return a(t,e),s(t,[{key:"addElementOutOfFlow",value:function(e,t,n){var r=this,o=void 0;t.currentPage.isEmpty?o=t.currentPage:(o=n(),t.pages.push(o));var i=n();t.pages.push(i),"none"!==this.rotate&&[o,i].forEach(function(e){var t=(0,u.default)((0,g.default)(".rotate-container"));t.classList.add((0,g.default)("spread-size-rotated")),t.classList.add((0,g.default)("rotate-spread-"+r.rotate)),t.appendChild(e.background),e.element.appendChild(t)}),o.background.appendChild(e),o.element.classList.add((0,g.default)("spread")),o.setPreference("left"),o.isOutOfFlow="same"===this.continue,o.hasOutOfFlowContent=!0,i.background.appendChild(e.cloneNode(!0)),i.element.classList.add((0,g.default)("spread")),i.setPreference("right"),i.isOutOfFlow="same"===this.continue,i.hasOutOfFlowContent=!0}}]),t}(f.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),d=n(9),f=r(d),c=n(2),p=r(c),h=n(0),g=r(h),b=function(e){function t(e){o(this,t),e.continue=e.continue||"same",e.rotate=e.rotate||"none";var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Full Bleed Page",p.default.validate(e,{selector:p.default.string,continue:p.default.enum("next","same","left","right"),rotate:p.default.enum("none","inward","outward","clockwise","counterclockwise")}),n}return a(t,e),s(t,[{key:"addElementOutOfFlow",value:function(e,t,n){var r=void 0;if(t.currentPage.isEmpty?r=t.currentPage:(r=n(),t.pages.push(r)),"none"!==this.rotate){var o=(0,u.default)((0,g.default)(".rotate-container"));o.classList.add((0,g.default)("page-size-rotated")),o.classList.add((0,g.default)("rotate-"+this.rotate)),o.appendChild(r.background),r.element.appendChild(o)}r.background.appendChild(e),r.hasOutOfFlowContent=!0}}]),t}(f.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=n(1),d=r(u),f=n(6),c=r(f),p=n(2),h=r(p),g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Footnote",h.default.validate(e,{selector:h.default.string,replace:h.default.func,render:h.default.func}),n}return a(t,e),s(t,[{key:"afterAdd",value:function(e,n,r,o){var i=n.currentPage.footer.children.length+1,a=(0,d.default)(".footnote"),s=this.render(e,i);return s instanceof HTMLElement?a.appendChild(s):a.innerHTML=s,n.currentPage.footer.appendChild(a),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"afterAdd",this).call(this,e,n,r,function(e){return n.currentPage.footer.removeChild(a),o(e)})}},{key:"createReplacement",value:function(e,t){var n=e.currentPage.footer.children.length;return this.replace(t,n)}},{key:"replace",value:function(e,t){return e.insertAdjacentHTML("beforeEnd",'<sup class="bindery-sup">'+t+"</sup>"),e}},{key:"render",value:function(e,t){return"<sup>"+t+"</sup> Default footnote (<a href='http://evanbrooks.info/bindery/#docs'>Docs</a>)"}}]),t}(c.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(6),u=r(l),d=n(2),f=r(d),c=n(8),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Page Reference",f.default.validate(e,{selector:f.default.string,replace:f.default.func,createTest:f.default.func}),n}return a(t,e),s(t,[{key:"afterAdd",value:function(e,t){var n=this,r=this.createTest(e);if(r){var o=e.parentNode,i=e.cloneNode(!0),a=this.replace(i,"###");return o.replaceChild(a,e),t.book.onComplete(function(){var o=a.parentNode,i=e.cloneNode(!0),s=t.book.pagesForTest(r),l=(0,c.makeRanges)(s),u=n.replace(i,l);o.replaceChild(u,a)}),a}return e}},{key:"createTest",value:function(e){var t=e.getAttribute("href");return t?(t=t.replace("#",""),t='[id="'+t+'"]',function(e){return e.querySelector(t)}):null}},{key:"replace",value:function(e,t){return e.insertAdjacentHTML("beforeend",", "+t),e}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),d=n(3),f=r(d),c=n(2),p=r(c),h=n(0),g=r(h),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Running Header",p.default.validate(e,{render:p.default.func}),n}return a(t,e),s(t,[{key:"afterBind",value:function(e){if(!e.runningHeader){var t=(0,u.default)((0,g.default)(".running-header"));e.element.appendChild(t),e.runningHeader=t}e.runningHeader.innerHTML=this.render(e)}},{key:"render",value:function(e){return e.number}}]),t}(f.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),d=n(2),f=r(d),c=function(e){function t(e){o(this,t),e.position=e.position||"before",e.continue=e.continue||"any";var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Page Break",f.default.validate(e,{selector:f.default.string,continue:f.default.enum("any","left","right"),position:f.default.enum("before","after","both","avoid")}),n}return a(t,e),s(t,[{key:"beforeAdd",value:function(e,t,n){return"before"!==this.position&&"both"!==this.position||(t.currentPage.isEmpty||n(),"any"!==this.continue&&t.currentPage.setPreference(this.continue)),e}},{key:"afterAdd",value:function(e,t,n){if("after"===this.position||"both"===this.position){var r=n();"any"!==this.continue&&r.setPreference(this.continue)}return e}},{key:"avoidSplit",get:function(){return"avoid"===this.position}}]),t}(u.default);t.default=c},function(e,t,n){var r=n(46);"string"==typeof r&&(r=[[e.i,r,""]]);n(53)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(47)(),t.push([e.i,'@media screen{.📖-page{background:#fff;outline:1px solid rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.2);overflow:hidden}.📖-show-bleed .📖-page{box-shadow:none;outline:none;overflow:visible}.📖-page3d .📖-page{overflow:hidden!important}.📖-page:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:999}.📖-zoom-wrap *{transition:box-shadow .2s}.📖-show-guides .bindery-zoom-wrap *{box-shadow:inset 0 0 0 1px rgba(0,92,255,.2)}.📖-show-guides .📖-page:after{box-shadow:0 0 0 1px #f0f}.📖-show-guides .📖-flowbox,.📖-show-guides .📖-footer,.📖-show-guides .📖-running-header{box-shadow:0 0 0 1px cyan}.📖-show-guides .📖-content{box-shadow:inset 0 0 0 1px blue}.📖-show-guides .📖-background{box-shadow:0 0 0 1px #ff0}.📖-show-guides .📖-out-of-flow{display:block;outline:1px solid cyan}.📖-show-guides .📖-out-of-flow:after{font:10px/1.4 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;content:attr(data-bindery);position:absolute;background:rgba(0,255,255,.5);padding:4px}.📖-show-guides .📖-right .📖-out-of-flow:after{left:100%}.📖-show-guides .📖-left .📖-out-of-flow:after{right:100%}.📖-is-overflowing{overflow:visible}.📖-is-overflowing:before{transition:none;content:"+";position:absolute;bottom:0;display:block;margin:0 auto -10px;left:0;right:0;text-align:center;font:8px/1.3 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;font-weight:500;text-transform:uppercase;letter-spacing:.1em;color:#ad0000;width:12px;background:#fff;z-index:999;border-radius:2px;padding:4px;overflow:hidden;border:1px solid currentColor}.📖-is-overflowing:hover:before{content:"Overflow";width:54px}.📖-is-overflowing .📖-content{transition:none}.📖-is-overflowing .📖-content:hover:after{box-shadow:inset 0 0 0 1px #ad0000;background:rgba(173,0,0,.04);content:"";position:absolute;top:0;left:0;right:0;bottom:0}}.📖-out-of-flow{display:none}.📖-page{width:200px;height:300px;position:relative;display:flex;flex-direction:column;flex-wrap:nowrap;margin:auto}.📖-flowbox{position:relative;margin:60px 40px;margin-bottom:0;flex:1 1 auto;min-height:0}.📖-content{padding:.1px;position:relative}.📖-footer{margin:60px 40px;margin-top:8pt;flex:0 1 auto;z-index:2}.📖-footer>:first-child:before{content:"";display:block;width:24pt;height:1px;box-shadow:inset 0 .5px 0 0 #000;margin-bottom:8pt}.📖-rotate-container{position:absolute}.📖-rotate-container.📖-rotate-clockwise{transform:rotate(90deg) translate3d(0,-100%,0);transform-origin:top left}.📖-left .📖-rotate-container.📖-rotate-clockwise .📖-background{bottom:0}.📖-right .📖-rotate-container.📖-rotate-clockwise .📖-background{top:0}.📖-rotate-container.📖-rotate-counterclockwise{transform:rotate(-90deg) translate3d(-100%,0,0);transform-origin:top left}.📖-left .📖-rotate-container.📖-rotate-counterclockwise .📖-background{top:0}.📖-right .📖-rotate-container.📖-rotate-counterclockwise .📖-background,.📖-rotate-container.📖-rotate-inward .📖-background{bottom:0}.📖-left .📖-rotate-container.📖-rotate-inward{transform:rotate(-90deg) translate3d(-100%,0,0);transform-origin:top left}.📖-right .📖-rotate-container.📖-rotate-inward{transform:rotate(90deg) translate3d(0,-100%,0);transform-origin:top left}.📖-rotate-container.📖-rotate-outward .📖-background{top:0}.📖-left .📖-rotate-container.📖-rotate-outward{transform:rotate(90deg) translate3d(0,-100%,0);transform-origin:top left}.📖-right .📖-rotate-container.📖-rotate-outward{transform:rotate(-90deg) translate3d(-100%,0,0);transform-origin:top left}.📖-left .📖-rotate-container.📖-rotate-spread-clockwise{transform:rotate(90deg) translate3d(0,-100%,0);transform-origin:top left}.📖-right .📖-rotate-container.📖-rotate-spread-clockwise{transform:rotate(90deg) translate3d(0,-50%,0);transform-origin:top left}.📖-left .📖-rotate-container.📖-rotate-spread-counterclockwise{transform:rotate(-90deg) translate3d(-100%,0,0);transform-origin:top left}.📖-right .📖-rotate-container.📖-rotate-spread-counterclockwise{transform:rotate(-90deg) translate3d(-100%,-50%,0);transform-origin:top left}.📖-background{position:absolute;z-index:0;overflow:hidden}.📖-left>.📖-background{right:0}.📖-right>.📖-background{left:0}.📖-sup{font-size:.667em}.📖-footer,.📖-running-header{font-size:10pt}.📖-running-header{position:absolute;text-align:center;top:.25in}.📖-left .📖-running-header{left:18pt;text-align:left}.📖-right .📖-running-header{right:18pt;text-align:right}p.📖-continuation{text-indent:0!important}li.📖-continuation{list-style:none!important}.📖-print-mark-wrap{display:none;position:absolute;pointer-events:none;top:0;bottom:0;left:0;right:0;z-index:999}.📖-show-bleed-marks .📖-print-mark-wrap,.📖-show-bleed-marks .📖-print-mark-wrap>[class*=bleed],.📖-show-crop .📖-print-mark-wrap,.📖-show-crop .📖-print-mark-wrap>[class*=crop]{display:block}.📖-print-mark-wrap>div{display:none;position:absolute;overflow:hidden}.📖-print-mark-wrap>div:after,.📖-print-mark-wrap>div:before{content:"";display:block;position:absolute}.📖-print-mark-wrap>div:before{top:0;left:0}.📖-print-mark-wrap>div:after{bottom:0;right:0}.📖-crop-fold,.📖-crop-left,.📖-crop-right{width:1px;margin:auto}.📖-crop-fold:after,.📖-crop-fold:before,.📖-crop-left:after,.📖-crop-left:before,.📖-crop-right:after,.📖-crop-right:before{width:1px;height:12pt;background-image:linear-gradient(90deg,#000 0,#000 51%,transparent 0);background-size:1px 100%}.📖-crop-fold{right:0;left:0}.📖-crop-left{left:0}.📖-crop-right{right:0}.📖-crop-bottom,.📖-crop-top{height:1px}.📖-crop-bottom:after,.📖-crop-bottom:before,.📖-crop-top:after,.📖-crop-top:before{width:12pt;height:1px;background-image:linear-gradient(180deg,#000 0,#000 51%,transparent 0);background-size:100% 1px}.📖-crop-top{top:0}.📖-crop-bottom{bottom:0}.📖-bleed-left,.📖-bleed-right{width:1px;margin:auto}.📖-bleed-left:after,.📖-bleed-left:before,.📖-bleed-right:after,.📖-bleed-right:before{width:1px;height:12pt;background-image:linear-gradient(90deg,#000 0,#000 51%,transparent 0);background-size:1px 100%}.📖-bleed-bottom,.📖-bleed-top{height:1px}.📖-bleed-bottom:after,.📖-bleed-bottom:before,.📖-bleed-top:after,.📖-bleed-top:before{width:12pt;height:1px;background-image:linear-gradient(180deg,#000 0,#000 51%,transparent 0);background-size:100% 1px}@media screen{.📖-viewing{background:#f4f4f4!important}.📖-root{transition:opacity .2s;opacity:1;padding:20px;position:relative;padding-right:240px;animation:fadeUp .3s;min-height:90vh}.📖-measure-area,.📖-root{background:#f4f4f4;z-index:99}.📖-measure-area{position:fixed;padding:50px 20px;overflow:scroll;visibility:hidden;top:0;left:0;right:240px;bottom:0}.📖-debug .📖-measure-area{visibility:visible}.📖-measure-area .📖-page{margin:0 auto 50px}.📖-print-page{margin:0 auto}.📖-error{font:16px/1.4 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;margin:15vh 15vw;max-width:500px;background:url('+n(48)+") no-repeat 0 0;background-size:48px;padding-top:64px}.📖-error-title{font-size:1.5em;margin-bottom:16px}.📖-error-text{margin-bottom:16px;white-space:pre-line}.📖-error-footer{opacity:.5;font-size:.66em;text-transform:uppercase;letter-spacing:.02em}.📖-show-bleed .📖-print-page{background:#fff;outline:1px solid rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.2);margin:20px auto}.📖-letter-landscape{width:11in;height:8.5in}.📖-letter-portrait{width:8.5in;height:11in}}@keyframes fadeUp{0%{opacity:0}to{opacity:1}}@page{margin:0}@media print{.📖-root *{-webkit-print-color-adjust:exact;color-adjust:exact}.📖-controls,.📖-viewing>:not(.📖-root){display:none!important}.📖-print-page{padding:1px;margin:0}.📖-zoom-wrap[style]{transform:none!important}}body.📖-viewing{margin:0}.📖-zoom-wrap{transform-origin:top left;transform-style:preserve-3d;height:calc(100vh - 40px)}.📖-viewing>:not(.📖-root):not(.📖-measure-area){display:none!important}.📖-print-page{page-break-after:always;position:relative;overflow:hidden}.📖-spread-wrapper{position:relative;display:flex;width:800px;margin:0 auto 50px}.📖-print-page .📖-spread-wrapper{margin:0 auto}.📖-print-meta{padding:12pt;text-align:center;font-family:-apple-system,BlinkMacSystemFont,Roboto,sans-serif;font-size:8pt}.📖-stage3d{perspective:3000px;transform-style:preserve-3d}.📖-page3d{margin:auto;width:400px;height:600px;transform:rotateY(0);transform-style:preserve-3d;transform-origin:left;transition:transform .5s,box-shadow .1s;position:absolute;left:0;right:0;top:0;bottom:0}.📖-page3d:hover{box-shadow:2px 0 4px rgba(0,0,0,.2)}.📖-page3d.flipped{transform:rotateY(-180deg)}.📖-page3d .📖-page{position:absolute;backface-visibility:hidden}.📖-page3d .📖-page3d-front{transform:rotateY(0)}.📖-page3d .📖-page3d-front:after{box-shadow:inset 12px 0 12px -12px rgba(0,0,0,.4)}.📖-page3d .📖-page3d-back{transform:rotateY(-180deg)}.📖-page3d .📖-page3d-back:after{box-shadow:inset -12px 0 12px -12px rgba(0,0,0,.4)}@media screen{.📖-viewing .📖-controls{display:block!important}}.📖-controls{font:14px/1.4 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;position:fixed;top:0;bottom:0;right:0;width:240px;z-index:999;margin:auto;color:#000;background:#f4f4f4;overflow:scroll;padding-bottom:100px}.📖-controls *{font:inherit;color:inherit;margin:0;padding:0;box-sizing:border-box}.📖-title{padding:20px;font-size:18px}.📖-spinner{border:1px solid transparent;border-left-color:#000;width:20px;height:20px;border-radius:50%;margin-right:.5em;display:none;vertical-align:middle}.📖-in-progress .📖-spinner{display:inline-block;animation:spin .6s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.📖-btn{-webkit-appearance:none;padding:8px 16px;color:#444;border:none;background:rgba(0,0,0,.06);cursor:pointer;font-size:12px;letter-spacing:.01em;font-weight:500;display:inline-block;border-radius:3px;width:auto;margin-right:8px}.📖-btn:focus{outline:none;box-shadow:0 1px 3px rgba(0,0,0,.2)}.📖-btn:hover{background:rgba(0,0,0,.1)}.📖-btn:active{background:rgba(0,0,0,.14)}.📖-btn-light{background:none}.📖-btn-main{background:#0000d0;color:#fff}.📖-btn-main:hover{background:#0000d0;opacity:.7}.📖-btn-main:active{background:#000;opacity:1}.📖-in-progress .📖-btn-print{opacity:.5;pointer-events:none}.📖-viewswitcher{padding:12px 8px;position:fixed;bottom:0;right:0;z-index:99;width:240px;background:#f4f4f4}.📖-viewmode{height:54px;width:25%;display:inline-block;text-align:center;font-size:10px;color:#aaa;cursor:pointer;border-radius:3px}.📖-viewmode:hover{background:rgba(0,0,0,.04)}.📖-viewmode .📖-icon{height:32px;width:32px;background:currentColor;margin:0 auto}.📖-viewmode.📖-grid .📖-icon{-webkit-mask:url("+n(49)+") no-repeat 50% 50%}.📖-viewmode.📖-flip .📖-icon{-webkit-mask:url("+n(50)+") no-repeat 50% 50%}.📖-viewmode.📖-outline .📖-icon{-webkit-mask:url("+n(51)+") no-repeat 50% 50%}.📖-viewmode.📖-print .📖-icon{-webkit-mask:url("+n(52)+') no-repeat 50% 50%}[bindery-view-mode=grid] .📖-grid,[bindery-view-mode=interactive] .📖-flip,[bindery-view-mode=outline] .📖-outline,[bindery-view-mode=print] .📖-print{color:#0000d0}.📖-row{position:relative;display:block;padding:8px 12px;margin:4px 8px;cursor:pointer}.📖-row select{float:right;border:none;background:transparent;padding:12px;width:100px}.📖-row select:hover{background:rgba(0,0,0,.04)}.📖-row input{width:85px;padding:4px 6px 4px 8px;text-align:right;border:none;position:absolute;top:0;right:0;height:100%;width:100%;color:#000;background:none}.📖-row input:focus{outline:none;background:rgba(0,0,0,.04)}.📖-row input:invalid{color:#bf5656}.📖-row.📖-debug-controls{display:none}.📖-debug .📖-in-progress .📖-row.📖-debug-controls{display:block}.📖-expand-row{color:rgba(0,0,0,.4);font-weight:500;border-radius:4px}.📖-expand-row:hover{background:rgba(0,0,0,.04)}.📖-expand-row:after{content:"+";font-size:1.5em;padding:0;position:absolute;right:12px;top:2px;font-weight:300}.📖-expand-row.selected:after{content:"\\2013"}.📖-expand-row.selected+.📖-expand-area{opacity:1;max-height:400px;margin-bottom:12px}.📖-expand-area{opacity:0;max-height:0;margin:-4px 8px 0;border-radius:0 0 4px 4px;transition:max-height .3s,margin .3s,opacity .5s;overflow:hidden}.📖-expand-area .📖-row{margin:4px 0}.📖-margin,.📖-size{display:inline-block;vertical-align:middle;margin:0;min-height:80px;background:#fff;outline:1px solid #ddd;height:100px;width:100px}.📖-size{padding:8px 0;font-size:12px}.📖-size div{position:relative;padding:6px 12px;color:#aaa}.📖-layout-control{margin:4px 12px 8px}.📖-margin{overflow:hidden}.📖-margin>div{position:absolute;width:54px;height:24px;z-index:5}.📖-margin>div:hover{z-index:99}.📖-margin .top{left:0;right:0;margin:auto;top:0}.📖-margin .bottom{left:0;right:0;margin:auto;bottom:0}.📖-margin .inner{left:0;text-align:left;top:calc(50% - 12px)}.📖-margin .inner input{text-align:left}.📖-margin .outer{right:0;text-align:right;top:calc(50% - 12px)}.📖-margin .outer input{text-align:right}.📖-margin .📖-preview{top:0;left:0;right:0;bottom:0;border:1px solid #a9a9ff;height:auto;width:auto;z-index:0;pointer-events:none;transition:border .2s}.📖-margin input{text-align:center;padding:4px;font-size:12px;text-shadow:0 2px 0 #fff,0 -2px 0 #fff,2px 0 0 #fff,-2px 0 0 #fff}.📖-margin input:focus{background:none!important}.📖-switch{width:28px;background:rgba(0,0,0,.2);border-radius:8px;margin-right:5px;vertical-align:middle;float:right;position:relative}.📖-switch,.📖-switch-handle{height:16px;transition:all .2s}.📖-switch-handle{width:16px;border-radius:50%;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.2);position:absolute;left:0;top:0}.📖-switch:hover .📖-switch-handle{box-shadow:0 2px 3px rgba(0,0,0,.3)}.📖-switch:active .📖-switch-handle{box-shadow:0 2px 4px rgba(0,0,0,.4)}.📖-row.selected .📖-switch{background:rgba(0,0,208,.6)}.📖-row.selected .📖-switch-handle{background:#0000d0;left:12px}@media (max-width:500px){.📖-root{padding-right:0}.📖-controls{box-shadow:0 0 2px rgba(0,0,0,.3);left:0;width:unset;padding-bottom:2em;top:unset}.📖-viewswitcher{right:unset}.📖-measure-area{right:0}.📖-btn-main{float:right}}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){e.exports="\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3Cpath id='a' d='M0 4H15V27H0z'/%3E%3Cpath id='b' d='M15 4H30V27H15z'/%3E%3Cpath id='c' d='M14 4.07147535L27 0 27 22.9285247 14 27z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(3 2)'%3E%3Cuse fill='%23FFFFFF' xlink:href='%23a'/%3E%3Cpath stroke='%23000000' d='M0.5 4.5H14.5V26.5H0.5z'/%3E%3C/g%3E%3Cg transform='translate(3 2)'%3E%3Cuse fill='%23FFFFFF' xlink:href='%23b'/%3E%3Cpath stroke='%23000000' d='M15.5 4.5H29.5V26.5H15.5z'/%3E%3C/g%3E%3Cg transform='translate(3 2)'%3E%3Cuse fill='%23FFFFFF' xlink:href='%23c'/%3E%3Cpath stroke='%23000000' d='M14.5,4.43882867 L14.5,26.3194563 L26.5,22.5611713 L26.5,0.680543732 L14.5,4.43882867 Z'/%3E%3C/g%3E%3Cpath fill='%23000000' opacity='.3' d='M16.3241613 26.7071852L25.7154453 22.615177 26.1596848 4.74924377 28 4.30920273 28 27z' transform='translate(3 2)'/%3E%3Ccircle fill='%23000000' cx='11' cy='14' r='1'/%3E%3Ccircle fill='%23000000' cx='11' cy='21' r='1'/%3E%3Cpath d='M28.1793786,11.0743011 C24.667534,11.0743011 21.8206214,13.9212136 21.8206214,17.4330583' stroke='%23000000' transform='rotate(-45 25 14.254)'/%3E%3C/g%3E%3C/svg%3E\""},function(e,t){e.exports="\"data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='%23000000' fill='none' fill-rule='evenodd'%3E%3Cpath d='M.5.5H11.5V15.5H.5zM11.5.5H22.5V15.5H11.5z' transform='translate(5 8)'/%3E%3C/g%3E%3C/svg%3E\""},function(e,t){e.exports="\"data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='%23000000' fill='none' fill-rule='evenodd'%3E%3Cpath d='M0.5 0.5H11.5V15.5H0.5z' transform='translate(5 8)'/%3E%3Cpath d='M22.5,15.5 L22.5,0.5' stroke-linecap='square' transform='translate(5 8)'/%3E%3Cpath d='M16.5,8.5 L16.5,23.5 L16.9093327,23.5 L24.5,20.6534998 L24.5,5.72150023 L17.1755617,8.46816459 L17,8.5 L16.5,8.5 Z'/%3E%3Cpath d='M27.5 23.5L16.5 23.5M24.5 8.5L27.5 8.5' stroke-linecap='square'/%3E%3C/g%3E%3C/svg%3E\""},function(e,t){e.exports="\"data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg stroke='%23000000'%3E%3Cpath d='M.5.5H11.5V15.5H.5zM11.5.5H22.5V15.5H11.5z' transform='translate(5 8)'/%3E%3C/g%3E%3Cpath stroke='%23000000' d='M8.5 13.5H13.5V20.5H8.5z'/%3E%3Cpath fill='%23000000' d='M8 11H14V12H8z'/%3E%3Cpath stroke='%23000000' d='M19.5 13.5H24.5V20.5H19.5z'/%3E%3Cpath fill='%23000000' d='M19 11H25V12H19z'/%3E%3C/g%3E%3C/svg%3E\""},function(e,t){e.exports="\"data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='%23000000' fill='none' fill-rule='evenodd'%3E%3Cpath d='M4.5 5.5H28.5V24.5H4.5z'/%3E%3Cpath d='M7.5 8.5L9.5 8.5M14.5 8.5L16.5 8.5M14.5 21.5L16.5 21.5M16.5 8.5L18.5 8.5M16.5 21.5L18.5 21.5M23.5 8.5L25.5 8.5M23.5 21.5L25.5 21.5M7.5 21.5L9.5 21.5M7.5 8.5L7.5 10.5M25.5 8.5L25.5 10.5M16.5 8.5L16.5 10.5M7.5 19.5L7.5 21.5M25.5 19.5L25.5 21.5M16.5 19.5L16.5 21.5' stroke-linecap='square'/%3E%3C/g%3E%3C/svg%3E\""},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=c[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(l(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(l(r.parts[i],t));c[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};n[i]?n[i].parts.push(u):t.push(n[i]={id:i,parts:[u]})}return t}function o(e,t){var n=g(),r=v[v.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function l(e,t){var n,r,o;if(t.singleton){var l=m++;n=b||(b=a(t)),r=u.bind(null,n,l,!1),o=u.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=d.bind(null,n),o=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function u(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var c={},p=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},h=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),b=null,m=0,v=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},void 0===t.singleton&&(t.singleton=h()),void 0===t.insertAt&&(t.insertAt="bottom");var o=r(e);return n(o,t),function(e){for(var i=[],a=0;a<o.length;a++){var s=o[a],l=c[s.id];l.refs--,i.push(l)}if(e){n(r(e),t)}for(var a=0;a<i.length;a++){var l=i[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete c[l.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()}]);
//# sourceMappingURL=bindery.min.js.map 